<!DOCTYPE html>

<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen and (orientation:portrait)"/>
    <meta name="viewport" content="width=device-width, user-scalable=no"/>
    <title> MINIPROJECT2 </title>
</head>

<body>
    <!-- HTML5 article tag for content -->
    <div id="content">
   
    <header>MINIPROJECT2</header>

   <h1>Welcome to Mini-Project 2</h1>
    </div>

    <div id="prompt">
        Isotope name (e.g. 'Eu-143'): <input id="isotope"/>
        <button type="button" id="submit">Submit</button>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        // import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        // import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
        // Documentation: https://firebase.google.com/docs/web/setup#available-libraries
      
        // Firebase configuration
        // const firebaseConfig = {
        //   apiKey: "",
        //   authDomain: "<projName>.firebaseapp.com",
        //   databaseURL: "https://<projName>-default-rtdb.firebaseio.com/",
        //   projectId: "<projName>",
        //   storageBucket: "<projName>.appspot.com",
        //   messagingSenderId: "",
        //   appId: ""
        // };
      
        // Initialize Firebase
        // const app = initializeApp(firebaseConfig);

        // Initialize Realtime Database and get a reference to the service
        // const database = getDatabase(app);

        // Button functions

        // D3.js code block
        // import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
        
        // function dbRef(dir) {
        //     const db = getDatabase();
        //     var data = {};
        //     set(ref(db, `<path>/${dir}/<attrs>`), data);
        // }

        var elements = {
            'H':{'Z':1,'stable':[1,2]},
            'He':{'Z':2,'stable':[3,4]},
            'Li':{'Z':3,'stable':[6,7]},
            'Be':{'Z':4,'stable':[9]},
            'B':{'Z':5,'stable':[10,11]},
            'C':{'Z':6,'stable':[12,13]},
            'N':{'Z':7,'stable':[14,15]},
            'O':{'Z':8,'stable':[16,17,18]},
            'F':{'Z':9,'stable':[19]},
            'Ne':{'Z':10,'stable':[20,21,22]},
            'Na':{'Z':11,'stable':[23]},
            'Mg':{'Z':12,'stable':[24,25,26]},
            'Al':{'Z':13,'stable':[27]},
            'Si':{'Z':14,'stable':[28,29,30]},
            'P':{'Z':15,'stable':[31]},
            'S':{'Z':16,'stable':[32,33,34,36]},
            'Cl':{'Z':17,'stable':[35,37]},
            'Ar':{'Z':18,'stable':[36,38,40]},
            'K':{'Z':19,'stable':[39,41]},
            'Ca':{'Z':20,'stable':[40,42,43,44,46]},
            'Sc':{'Z':21,'stable':[45]},
            'Ti':{'Z':22,'stable':[46,47,48,49,50]},
            'V':{'Z':23,'stable':[51]},
            'Cr':{'Z':24,'stable':[52,53,54]},
            'Mn':{'Z':25,'stable':[55]},
            'Fe':{'Z':26,'stable':[54,56,57,58]},
            'Co':{'Z':27,'stable':[59]},
            'Ni':{'Z':28,'stable':[58,60,61,62,64]},
            'Cu':{'Z':29,'stable':[63,65]},
            'Zn':{'Z':30,'stable':[64,66,67,68]},
            'Ga':{'Z':31,'stable':[69,71]},
            'Ge':{'Z':32,'stable':[70,72,73,74,76]},
            'As':{'Z':33,'stable':[75]},
            'Se':{'Z':34,'stable':[74,76,77,78,80]},
            'Br':{'Z':35,'stable':[79,81]},
            'Kr':{'Z':36,'stable':[78,80,82,83,84,86]},
            'Rb':{'Z':37,'stable':[85]},
            'Sr':{'Z':38,'stable':[84,86,87,88]},
            'Y':{'Z':39,'stable':[89]},
            'Zr':{'Z':40,'stable':[90,91,92,94]},
            'Nb':{'Z':41,'stable':[93]},
            'Mo':{'Z':42,'stable':[92,94,95,96,97,98]},
            'Tc':{'Z':43,'stable':[]},
            'Ru':{'Z':44,'stable':[96,98,99,100,101,102,104]},
            'Rh':{'Z':45,'stable':[103]},
            'Pd':{'Z':46,'stable':[102,104,105,106,108,110]},
            'Ag':{'Z':47,'stable':[107,109]},
            'Cd':{'Z':48,'stable':[106,108,110,111,112,114]},
            'In':{'Z':49,'stable':[113]},
            'Sn':{'Z':50,'stable':[112,114,115,116,117,118,119,120,122,124]},
            'Sb':{'Z':51,'stable':[121,123]},
            'Te':{'Z':52,'stable':[120,122,124,125,126]},
            'I':{'Z':53,'stable':[127]},
            'Xe':{'Z':54,'stable':[126,128,129,130,131,132]},
            'Cs':{'Z':55,'stable':[133]},
            'Ba':{'Z':56,'stable':[130,134,135,136,137,138]},
            'La':{'Z':57,'stable':[139]},
            'Ce':{'Z':58,'stable':[136,140]},
            'Pr':{'Z':59,'stable':[141]},
            'Nd':{'Z':60,'stable':[142,143,145,146,148]},
            "Pm":{'Z':61,'stable':[]},
            'Sm':{'Z':62,'stable':[144,149,150,152,154]},
            'Eu':{'Z':63,'stable':[153]},
            'Gd':{'Z':64,'stable':[154,155,156,157,158,160]},
            'Tb':{'Z':65,'stable':[159]},
            'Dy':{'Z':66,'stable':[156,158,160,161,162,163,164]},
            'Ho':{'Z':67,'stable':[165]},
            'Er':{'Z':68,'stable':[162,164,166,167,168,170]},
            'Tm':{'Z':69,'stable':[169]},
            'Yb':{'Z':70,'stable':[168,170,171,172,173,174,176]},
            'Lu':{'Z':71,'stable':[175]},
            'Hf':{'Z':72,'stable':[176,177,178,179,180]},
            'Ta':{'Z':73,'stable':[181]},
            'W':{'Z':74,'stable':[182,184,186]},
            'Re':{'Z':75,'stable':[185]},
            'Os':{'Z':76,'stable':[187,188,189,190,192]},
            'Ir':{'Z':77,'stable':[191,193]},
            'Pt':{'Z':78,'stable':[192,194,195,196,198]},
            'Au':{'Z':79,'stable':[197]},
            'Hg':{'Z':80,'stable':[196,198,199,200,201,202,204]},
            'Tl':{'Z':81,'stable':[203,205]},
            'Pb':{'Z':82,'stable':[206,207,208]},
            'Bi':{'Z':83,'stable':[]},
            'Po':{'Z':84,'stable':[]},
            'At':{'Z':85,'stable':[]},
            'Rn':{'Z':86,'stable':[]},
            'Fr':{'Z':87,'stable':[]},
            'Ra':{'Z':88,'stable':[]},
            'Ac':{'Z':89,'stable':[]},
            'Th':{'Z':90,'stable':[]},
            'Pa':{'Z':91,'stable':[]},
            'U':{'Z':92,'stable':[]},
            'Np':{'Z':93,'stable':[]},
            'Pu':{'Z':94,'stable':[]},
            'Am':{'Z':95,'stable':[]},
            'Cu':{'Z':96,'stable':[]},
            'Bk':{'Z':97,'stable':[]},
            'Cf':{'Z':98,'stable':[]},
            'Ei':{'Z':99,'stable':[]},
            'Fm':{'Z':100,'stable':[]},
            'Md':{'Z':101,'stable':[]},
            'No':{'Z':102,'stable':[]},
            'Lr':{'Z':103,'stable':[]},
            'Rf':{'Z':104,'stable':[]},
            'Db':{'Z':105,'stable':[]},
            'Sg':{'Z':106,'stable':[]},
            'Bh':{'Z':107,'stable':[]},
            'Hs':{'Z':108,'stable':[]},
            'Mt':{'Z':109,'stable':[]},
            'Ds':{'Z':110,'stable':[]},
            'Rg':{'Z':111,'stable':[]},
            'Cn':{'Z':112,'stable':[]},
            'Nh':{'Z':113,'stable':[]},
            'Fl':{'Z':114,'stable':[]},
            'Mc':{'Z':115,'stable':[]},
            'Lv':{'Z':116,'stable':[]},
            'Tn':{'Z':117,'stable':[]},
            'Og':{'Z':118,'stable':[]}
        };

        function B(A,Z) {
            a_v = 15.5;
            a_s = 16.8;
            a_c = 0.72;
            a_sym = 23;
            a_p = 34;
            delta = (1-A%2)*(-1)**(Z%2)*a_p*A**(2/3);
            return a_v*A-a_s*A**(2/3)-a_c*Z*(Z-1)*A**(-1/3)-a_sym*(A-2*Z)**2/A+delta;
        }

        function createDecayChain() {
            var isotope = document.getElementById('isotope').value;
            var symbol,A,Z;
            var B1,B2,B3;
            var decayChain;
            if (isotope[0]+isotope[1] in elements) {
                symbol=isotope[0]+isotope[1];
            } else if (isotope[0] in elements) {
                symbol=isotope[0];
            }
            A=isotope.replaceAll(`${symbol}-`,'');
            Z=elements[symbol]['Z'];

            while (true) {
                if (elements[symbol]['stable'].indexOf(A)>=0) {
                    console.log(decayChain);
                    break;
                }
                B1=B(A-4,Z-2); // alpha decay
                B2=B(A,Z-1); // beta-plus decay
                B3=B(A,Z+1); // beta-minus decay
                if (Math.max(B1,B2,B3)==B1) {
                    decayChain.push('α');
                    A-=4;Z-=2;
                } else if (Math.max(B1,B2,B3)==B2) {
                    decayChain.push('β⁺');
                    Z-=1;
                } else if (Math.max(B1,B2,B3)==B3) {
                    decayChain.push('β⁻');
                    Z+=1;
                }
                symbol=Object.keys(elements)[Z-1];
            }
        }

        document.getElementById('submit').addEventListener('click', () => createDecayChain());
    </script>
</body>
</html>